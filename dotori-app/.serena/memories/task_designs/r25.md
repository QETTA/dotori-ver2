# R25 — 폰트·워딩·문맥 패치 (4 에이전트)
> 설계일: 2026-02-24
> 근거: 폰트 전범위 + 카드 워딩 + 문맥 전체 분석 결과

---

## SHARED_RULES (모든 에이전트 공통)

```
1. 수정 대상 파일만 수정. SCOPE 밖 파일 절대 금지.
2. 한국어 워딩 수정 시 기존 JSX 구조/className 변경 금지 — 텍스트만 교체.
3. font/CSS 수정 시 기존 레이아웃 깨지지 않도록 동일 시각적 결과 유지.
4. 산출물: git diff + 요약 7줄 + 테스트 커맨드.
5. 빌드 검증: env -u NODE_ENV npm run build (0 errors)
6. 테스트: npm test (111 pass)
7. text-[Npx] 임의 픽셀값 추가 금지.
8. framer-motion 사용 금지 → motion/react만.
9. Catalyst 컴포넌트(src/components/catalyst/) 내부 수정 금지.
10. 톤 기준: "-세요" (존댓말) + 따뜻한 종결 ("~예요", "~거예요", "~해봐요")
```

---

## Agent 1: 개발 용어 제거 (P0 카피 수정)

```
[CONTEXT]
부모에게 직접 노출되는 UI에 개발자 전용 용어가 남아있음.
"NBA", "TO", "브랜드 톤", "리스크 브리핑" 등이 카드와 랜딩에 표시됨.

[GOAL]
부모가 이해할 수 없는 개발/전문 용어 6건을 자연스러운 한국어로 교체.

[NON-GOALS]
- 레이아웃/스타일 변경 없음
- brand-copy.ts 중앙화는 이번 스코프 아님

[AC]
1. "NBA 기반" 배지 → "이동 판단 기준" 으로 교체
2. "브랜드 톤에서 정리한 핵심 신호를 기준으로 이동할지 말지 빠르게 판단해요" → "반편성·교사·빈자리 변화를 한눈에 정리했어요"
3. FacilityCard "TO {n}석" → "빈자리 {n}석" (compact + full 두 곳)
4. FacilityCard "수용률" → "정원 현황" (compact + full 두 곳)
5. FacilityCard "현재 입소 가능 시설" → "빈자리 있음"
6. 랜딩 "실시간 TO 변화 감지" → "실시간 빈자리 변화 감지"
7. 랜딩 "교사 교체 리스크 브리핑" → "교사 교체 현황 알림"
8. 빌드 0 errors, 테스트 111 pass

[SCOPE FILES]
1. src/app/(app)/page.tsx — L318 설명문, L455 NBA 배지
2. src/components/dotori/FacilityCard.tsx — L134,306 TO표시, L147,320 수용률, L194 상태문구
3. src/app/(landing)/landing/page.tsx — L21,22 AI_SIGNALS 배열

[REPLACEMENTS — 정확한 old→new]

### src/app/(app)/page.tsx
- L455 부근: `NBA 기반` → `이동 판단 기준`
- L318 부근: `브랜드 톤에서 정리한 핵심 신호를 기준으로 이동할지 말지 빠르게 판단해요` → `반편성·교사·빈자리 변화를 한눈에 정리했어요`

### src/components/dotori/FacilityCard.tsx
- L134: `TO {availableSeats}석` → `빈자리 {availableSeats}석`
- L306: `TO {availableSeats}석` → `빈자리 {availableSeats}석`
- L147: `수용률` → `정원 현황`
- L320: `수용률` → `정원 현황`
- L194: `현재 입소 가능 시설` → `빈자리 있음`

### src/app/(landing)/landing/page.tsx
- L21: `'실시간 TO 변화 감지'` → `'실시간 빈자리 변화 감지'`
- L22: `'교사 교체 리스크 브리핑'` → `'교사 교체 현황 알림'`

[TEST PLAN]
env -u NODE_ENV npm run build && npm test
grep -rn "NBA 기반\|브랜드 톤에서\|수용률\|리스크 브리핑" src/ → 0 matches
```

---

## Agent 2: 톤 통일 (딱딱→따뜻 교체)

```
[CONTEXT]
페이지별 톤 불일치: 대기현황은 관료적("반영이 완료되지 않았어요"),
온보딩은 오해 유발("무료로 먼저 체험하기"), 커뮤니티는 용어 불일치("입주 이전").
BottomTabBar "MY"는 5개 탭 중 유일한 영어.

[GOAL]
톤이 딱딱하거나 불일치하는 워딩 7건을 따뜻하고 일관된 톤으로 교체.

[NON-GOALS]
- 레이아웃/스타일 변경 없음
- 새 컴포넌트 생성 없음

[AC]
1. 대기현황 "아직 최종 입소 시기 반영이 완료되지 않았어요. 대기 순번 기준으로 업데이트돼요." → "입소 시기는 아직 확정되지 않았어요. 순번 기준으로 업데이트될 거예요."
2. 대기현황 "아직 입소 시기 정보가 비어있어요. 나중에 다시 확인해 주세요." → "입소 시기 정보가 아직 없어요. 나중에 다시 확인해봐요."
3. 온보딩 "무료로 먼저 체험하기" → "무료로 시작하기"
4. 설정 "다음 갱신일" → "다음 결제일" (2곳)
5. 커뮤니티 "입주 이전 고민을 먼저 공유해볼까요?" → "이동 고민을 먼저 공유해볼까요?"
6. BottomTabBar "MY" → "마이"
7. 빌드 0 errors, 테스트 111 pass

[SCOPE FILES]
1. src/app/(app)/my/waitlist/page.tsx — L95, L96
2. src/app/(onboarding)/onboarding/page.tsx — L839
3. src/app/(app)/my/settings/page.tsx — L246, L280 부근
4. src/app/(app)/community/page.tsx — L91
5. src/components/dotori/BottomTabBar.tsx — L57

[REPLACEMENTS — 정확한 old→new]

### src/app/(app)/my/waitlist/page.tsx
- L95: `"아직 최종 입소 시기 반영이 완료되지 않았어요. 대기 순번 기준으로 업데이트돼요."` → `"입소 시기는 아직 확정되지 않았어요. 순번 기준으로 업데이트될 거예요."`
- L96: `"아직 입소 시기 정보가 비어있어요. 나중에 다시 확인해 주세요."` → `"입소 시기 정보가 아직 없어요. 나중에 다시 확인해봐요."`

### src/app/(onboarding)/onboarding/page.tsx
- L839: `무료로 먼저 체험하기` → `무료로 시작하기`

### src/app/(app)/my/settings/page.tsx
- L246 부근: `다음 갱신일` → `다음 결제일`
- L280 부근: `다음 갱신일은` → `다음 결제일은`

### src/app/(app)/community/page.tsx
- L91: `입주 이전 고민을 먼저 공유해볼까요?` → `이동 고민을 먼저 공유해볼까요?`

### src/components/dotori/BottomTabBar.tsx
- L57: `label: 'MY'` → `label: '마이'`

[TEST PLAN]
env -u NODE_ENV npm run build && npm test
grep -rn "반영이 완료되지\|먼저 체험하기\|갱신일\|입주 이전" src/ → 0 matches
grep -n "label: 'MY'" src/components/dotori/BottomTabBar.tsx → 0 matches
```

---

## Agent 3: 폰트 시스템 P0 수정

```
[CONTEXT]
Plus Jakarta Sans가 font-wordmark에 선언만 되어있고 실제 CDN/import가 없음.
SplashScreen에 인라인 fontFamily 하드코딩 2곳.
loading.css에 font-family, font-size, color 하드코딩.

[GOAL]
폰트 시스템 P0 이슈 3건 수정: Plus Jakarta Sans 로드, 인라인 스타일 제거, CSS 변수 전환.

[NON-GOALS]
- DS_TYPOGRAPHY 토큰 구조 변경 없음
- Catalyst 컴포넌트 수정 없음
- 폰트 크기 변경 없음 (시각적 동일 유지)

[AC]
1. layout.tsx에 Plus Jakarta Sans CDN 링크 추가 (Google Fonts CDN, weight 500;600;700)
2. SplashScreen.tsx L98: 인라인 `fontFamily: 'Pretendard, system-ui, sans-serif'` → className `font-sans` 사용 (인라인 style에서 fontFamily 제거, fontSize는 유지 가능)
3. SplashScreen.tsx L106: 동일하게 인라인 fontFamily 제거 → className `font-sans`
4. loading.css L66: `font-family: "Pretendard"...` → `font-family: var(--font-sans);`
5. loading.css L67: `font-size: 13px;` → `font-size: 0.8125rem;` (동일 크기, rem 단위)
6. loading.css L69: `color: #8a7a6a;` → `color: var(--color-dotori-600, #8a7a6a);` (fallback 유지)
7. 빌드 0 errors, 테스트 111 pass
8. SplashScreen, 로딩 화면 시각적 동일 (폰트 깨짐 없음)

[SCOPE FILES]
1. src/app/layout.tsx — L105~109 부근 (Pretendard CDN 옆에 추가)
2. src/components/dotori/SplashScreen.tsx — L98, L106
3. src/styles/loading.css — L66, L67, L69

[CHANGES]

### src/app/layout.tsx
L109 (Pretendard CDN 링크 닫는 태그 뒤)에 추가:
```html
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@500;600;700&display=swap"
/>
```

### src/components/dotori/SplashScreen.tsx
- L98: `style={{ fontSize: 28, fontFamily: 'Pretendard, system-ui, sans-serif' }}` → `className="font-sans"` 추가하고 style에서 fontFamily 제거, fontSize 28은 style에 유지: `style={{ fontSize: 28 }}` (또는 text-[28px] 사용은 금지이므로 style 유지)
- L106: fontFamily가 포함된 style 객체에서 `fontFamily: 'Pretendard, system-ui, sans-serif'` 제거. 해당 엘리먼트에 `className="font-sans"` 추가.

### src/styles/loading.css
- L66: `font-family: "Pretendard", "Noto Sans KR", sans-serif;` → `font-family: var(--font-sans);`
- L67: `font-size: 13px;` → `font-size: 0.8125rem;`
- L69: `color: #8a7a6a;` → `color: var(--color-dotori-600, #8a7a6a);`

[TEST PLAN]
env -u NODE_ENV npm run build && npm test
grep -rn "fontFamily.*Pretendard" src/components/ → 0 matches
grep -n "font-family:.*Pretendard" src/styles/loading.css → 0 matches
```

---

## Agent 4: 임의 tracking 값 토큰화

```
[CONTEXT]
FacilityCard, landing, my/page.tsx에 tracking-[0.14em], [0.18em], [0.2em], [0.02em] 등
임의 letter-spacing 값 5곳이 분산 사용됨.
DS에 tracking 토큰이 없어 일관성 부재.

[GOAL]
임의 tracking 값을 Tailwind 기본 유틸리티(tracking-wide, tracking-wider, tracking-tight)로 교체하여 토큰 일관성 확보.

[NON-GOALS]
- 새 Tailwind 토큰 추가 없음 (기존 유틸리티만 사용)
- 텍스트 내용 변경 없음
- 시각적 차이 최소화 (letter-spacing만 미세 조정)

[AC]
1. FacilityCard L146: `tracking-[0.14em]` → `tracking-wide` (0.025em, 대문자 라벨에 적합)
2. FacilityCard L319: `tracking-[0.18em]` → `tracking-wider` (0.05em)
3. FacilityCard L298: `tracking-[0.02em]` → `tracking-wide`
4. Landing L160: `tracking-[0.14em]` → `tracking-wide`
5. my/page.tsx에 tracking-[0.2em] 있으면 → `tracking-wider`로 교체
6. 빌드 0 errors, 테스트 111 pass
7. grep "tracking-\[" src/ → 0 matches (Catalyst 제외)

[SCOPE FILES]
1. src/components/dotori/FacilityCard.tsx — L146, L298, L319
2. src/app/(landing)/landing/page.tsx — L160
3. src/app/(app)/my/page.tsx — tracking-[0.2em] 있는 곳 (약 L45~50, L150 부근)

[MAPPING TABLE]
| 현재 값 | Tailwind 토큰 | 실제 값 | 용도 |
|---------|-------------|---------|------|
| tracking-[0.02em] | tracking-wide | 0.025em | 일반 텍스트 미세 간격 |
| tracking-[0.14em] | tracking-wide | 0.025em | 대문자 라벨 (시각적 차이 미미) |
| tracking-[0.18em] | tracking-wider | 0.05em | 대문자 섹션 라벨 |
| tracking-[0.2em] | tracking-wider | 0.05em | 대문자 태그 |

[TEST PLAN]
env -u NODE_ENV npm run build && npm test
grep -rn "tracking-\[" src/ --include="*.tsx" | grep -v catalyst | grep -v node_modules → 0 matches
```

---

## 빌드 검증 (wave 완료 후)

```bash
cd /home/sihu2/dotori-ver2-qetta/dotori-app
env -u NODE_ENV npm run build   # 47 pages, 0 errors
npm test                         # 111 tests pass

# 개발 용어 잔류 검사
grep -rn "NBA 기반\|브랜드 톤에서\|수용률\|리스크 브리핑\|반영이 완료되지\|먼저 체험하기\|갱신일\|입주 이전" src/
# → 0 matches 예상

# 폰트 하드코딩 잔류 검사
grep -rn "fontFamily.*Pretendard" src/components/
grep -n "font-family:.*Pretendard" src/styles/
# → 0 matches 예상

# 임의 tracking 잔류 검사 (Catalyst 제외)
grep -rn "tracking-\[" src/ --include="*.tsx" | grep -v catalyst
# → 0 matches 예상
```

---

## 에이전트 파일 소유권

| Agent | 파일 | 유형 |
|-------|------|------|
| 1 | page.tsx (홈), FacilityCard.tsx, landing/page.tsx | 카피 |
| 2 | waitlist/page.tsx, onboarding/page.tsx, settings/page.tsx, community/page.tsx, BottomTabBar.tsx | 카피 |
| 3 | layout.tsx, SplashScreen.tsx, loading.css | 폰트 |
| 4 | FacilityCard.tsx (tracking만), landing/page.tsx (tracking만), my/page.tsx (tracking만) | CSS |

**충돌 주의**: Agent 1과 Agent 4가 FacilityCard.tsx, landing/page.tsx 공유.
→ **Agent 1 먼저 실행 → Agent 4는 Agent 1 완료 후 실행** (또는 Agent 4가 tracking 클래스만 수정하므로 병렬 가능하나, 안전을 위해 순차 권장)

---

## 실행 권장

```bash
# Wave 1: Agent 1 + Agent 2 + Agent 3 (병렬, 파일 충돌 없음)
# Wave 2: Agent 4 (Agent 1 완료 후, FacilityCard 충돌 방지)

# 또는 codex-wave.sh 사용 시:
# tasks.txt에 4개 태스크 기록 후:
./scripts/codex-wave.sh /tmp/r25-tasks.txt --wave=3
# Wave 1: Agent 1,2,3 → tsc 검증 → Wave 2: Agent 4
```
